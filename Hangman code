#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include<time.h>
#include "my_strin.c"

char word[20];
void fetch_word()
{
	char ch[20],c;
	int n,i;
	FILE *fp;
	fp=fopen("word.txt","r");
	srand(time(0));
	n=rand()%10;
	//randomize();
	//n=random(10)+1;
	i=0;
	srand(time(0));
	n=rand()%10;

	while(1)
	{
		c=fgetc(fp);
		ch[i]=c;
		if(c=='\n')
		{
			n--;
			if(n==0)
			break;
			i=-1;
		}
		i++;
	}
	ch[i]='\0';
	str_copy(word,ch);
	puts(word);
	fclose(fp);
}

void print_word(char ch[])
{
	int i;
	for(i=0;i<length(ch);i++)
	{
		printf("%c ",ch[i]);
	}
}

int main()
{
	char ch[20],temp[26],c;
	int n,i,time=5,j=0,f;
	//clrscr();
	fetch_word();
	n=length(word);
	for(i=0;i<n;i++)
		ch[i]='-';
	ch[n]='\0';
	str_copy(temp," ");
	while(1)
	{
		//clrscr();
		printf("Used Alphabets: %s\n\n",temp);
		print_word(ch);
		printf("\nEnter Character: ");
		flushall();
		scanf("%c",&c);
		temp[j]=c;
		temp[j+1]='\0';
		printf("\n\n");
		j++;
		f=0;
		for(i=0;i<n;i++)
		{
			if(c==word[i])
			{
				ch[i]=c;
				f=1;
			}
		}
		if(f==0)
		time--;

		if(time==0)
		{
			printf("\n\nYou LOOSE");
			printf("\nCorrect Word: ");
			puts(word);
			break;
		}

		if(str_cmp(ch,word)==0)
		{
			printf("\n\nYou Won");
			break;
		}
	}
	//getch();
	return 0;
}
